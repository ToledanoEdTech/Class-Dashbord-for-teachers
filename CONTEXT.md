# הקשר הפרויקט – ToledanoEdTech

> **מסמך זה מתאר את האתר ואת ייעודו. יש להשתמש בו כבסיס להבנה בכל עבודה על הקוד.**

---

## מה האתר?

**ToledanoEdTech** הוא **דשבורד כיתתי למורים** – אפליקציית ווב לניתוח פדגוגי המבוססת על שני מקורות נתונים: אירועי התנהגות וציונים.  
השם המוצג באתר: **"ToledanoEdTech"**, והכותרות בעברית: **"דשבורד כיתתי"**, **"מערכת מעקב פדגוגית"**.

- **סוג:** Single-Page Application (SPA) – כל העיבוד בדפדפן, ללא שרת backend.
- **שפה:** ממשק בעברית, RTL. קוד ומשתנים באנגלית.

---

## למה האתר משמש?

- **להעלאת קבצים** שמורים מורידים ממערכות בית הספר (יומן מחנך, מערכת ציונים).
- **לניתוח אוטומטי** של ציונים והתנהגות: ממוצעים, מגמות, סיווג אירועים (חיובי/שלילי/ניטרלי).
- **להצגת תמונת מצב כיתתית:** כמה תלמידים, ממוצע כיתתי, אירועי משמעת, תלמידים בסיכון, גרפים.
- **לצפייה פרטנית בתלמיד:** מגמות ציונים והתנהגות, גיליון ציונים, יומן אירועים, תובנות והמלצות, קורלציות בין התנהגות לציונים.
- **לייצוא דוח תלמיד** לאקסל (סיכום, ציונים, התנהגות).

היעד: לאפשר למורה לראות במהירות מי בסיכון, איפה יש קשר בין התנהגות לציונים, ואילו תלמידים משתפרים או מידרדרים.

---

## למי האתר מיועד?

- **מורים ומחנכים** בבתי ספר שמשתמשים ב"יומן מחנך" ובמערכת ציונים (הקבצים מיועדים לפורמט הייצוא של מערכות אלה).
- משתמש מקצה אחד: המורה מעלה קבצים, צופה בדשבורד ובפרופיל תלמיד, ומייצא דוחות.

---

## מקורות הנתונים (קבצי הקלט)

| קובץ | מקור במערכת בית הספר | פורמט |
|------|----------------------|--------|
| **קובץ התנהגות** | יומן מחנך → דוחות → פירוט אירועי התנהגות (עם עמודת פירוט) | CSV / XLSX / XLS |
| **קובץ ציונים** | מערכת ציונים → הורדת "ציונים שוטפים - סדין" | CSV / XLSX / XLS |

האפליקציה מחפשת כותרות בעברית (למשל "שם המורה", "ת.ז", "שם התלמיד") כדי לזהות שורות כותרת ועמודות. המבנה והעמודות הספציפיים מתוארים ב-`utils/processing.ts`.

---

## מושגים מרכזיים בקוד

- **BehaviorEvent** – אירוע התנהגות בודד (תאריך, סוג, מורה, מקצוע, קטגוריה: positive/negative/neutral, הצדקה, הערה).
- **Grade** – ציון בודד (תלמיד, מקצוע, מורה, מטלה, תאריך, ציון, משקל).
- **Student** – תלמיד מאוחד: רשימת ציונים, רשימת אירועים, ממוצע משוקלל, ספירות חיובי/שלילי, מגמות, רמת סיכון, קורלציות.
- **מגמת ציונים (gradeTrend)** – improving / declining / stable, לפי השוואת חצאי 6 הציונים האחרונים.
- **מגמת התנהגות (behaviorTrend)** – improving / declining / stable, לפי 12 האירועים האחרונים (משקל לשלילי).
- **רמת סיכון (riskLevel)** – high / medium / low, נגזרת מ-**ציון סיכון (riskScore)** 1–10 (חישוב ב-`processing.ts`).
- **קורלציה (Correlation)** – ציון נמוך (<70) בסמיכות (עד 4 ימים) לאירועי משמעת שליליים; משמש להמלצות ולתובנות.

סיווג אירועים (חיובי/שלילי) מתבצע לפי מילות מפתח בעברית ב-`utils/processing.ts` (למשל: מילה טובה, הצטיינות → חיובי; חיסור, איחור, הפרעה → שלילי; חיסור מוצדק → ניטרלי).

---

## זרימת האפליקציה (מסכים)

1. **Upload** – העלאת קובץ התנהגות + קובץ ציונים. כפתור "טען נתונים לדוגמה" מפעיל דאטה מובנית מ-`generateSampleData()`.
2. **Dashboard** – סיכום כיתתי (KPI), גרף התפלגות ציונים, מדד התנהגות (Pie), טבלת/כרטיסי תלמידים עם חיפוש ומיון. לחיצה על תלמיד → מעבר לפרופיל.
3. **Student** – פרופיל תלמיד: מגמות (גרפי ציונים והתנהגות), גיליון ציונים, יומן התנהגות, תובנות (חיסורים, המלצות, קורלציות), ייצוא לאקסל.

ניווט: לוגו "ToledanoEdTech" מחזיר למסך ההעלאה (ומנקה state).

---

## מבנה הפרויקט (קבצים רלוונטיים)

| נתיב | תפקיד |
|------|--------|
| `App.tsx` | State ראשי, החלפת מסכים (upload / dashboard / student), טיפול ב-`processFiles` ובחירת תלמיד |
| `index.tsx` | כניסה ל-React, עיגון ל-`#root` |
| `index.html` | דף יחיד, RTL, `lang="he"`, Tailwind, Rubik, import map |
| `types.ts` | הממשקים: EventType, BehaviorEvent, Grade, Correlation, Student, AppState |
| `utils/processing.ts` | קריאת קבצים (CSV/Excel), פרסור התנהגות וציונים, סיווג אירועים, חישוב מגמות וסיכון, קורלציות, `processFiles`, `generateSampleData` |
| `components/FileUpload.tsx` | מסך העלאה, הנחיות, כפתורי "נתח נתונים" ו"טען נתונים לדוגמה" |
| `components/Dashboard.tsx` | דשבורד כיתתי: KPI, גרפים (Recharts), רשימת תלמידים (טבלה/כרטיסים), חיפוש ומיון |
| `components/StudentProfile.tsx` | פרופיל תלמיד: טאבים (מגמות, ציונים, התנהגות, תובנות), גרפים, ייצוא Excel |

---

## סטק טכני

- **Frontend:** React 18, TypeScript, Vite.
- **עיצוב:** Tailwind CSS, גופנים Rubik.
- **גרפים:** Recharts (Bar, Line, Pie וכו').
- **קבצים:** `xlsx` ל-Excel, `papaparse` ל-CSV; תאריכים עם `date-fns`.
- **איקונים:** lucide-react.

אין API חיצוני; אין שמירת נתונים בשרת. כל הנתונים נטענים מהקבצים שהמשתמש בוחר (או מדאטה לדוגמה).

---

## כללי עבודה מומלצים (לסוכן/מפתח)

- **עברית בממשק:** טקסטים למשתמש בעברית, כיווניות RTL נשמרת (כולל ב-Tooltips ובטבלאות).
- **אין לשנות** את הלוגיקה של פרסור הקבצים או את מבנה הקבצים המיוצאים מבית הספר בלי לתעד ולוודא תאימות לפורמט הקיים.
- **מזהי תלמיד:** איחוד תלמידים תמיד לפי `studentId` (ת.ז). שמות יכולים להגיע מקובץ ההתנהגות או מקובץ הציונים.
- **סיכון והמלצות:** חישוב הסיכון וההמלצות בפרופיל מבוססים על המגמות והספירות המחושבות ב-`processing.ts`; שינוי באחד דורש בדיקה בשני.

---

*מסמך הקשר – מעודכן לפי מצב הפרויקט. יש לעדכן מסמך זה כאשר משתנים ייעוד האתר, מקורות הנתונים או זרימת המסכים.*
