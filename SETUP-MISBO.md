# הוראות התקנה והפעלה - אינטגרציה עם משוב

## סקירה

המערכת כעת תומכת בהתחברות אוטומטית למשוב והורדת קבצים באמצעות web scraping עם Puppeteer.

## שלבי התקנה

### 1. התקנת תלויות השרת

```bash
cd server
npm install
```

**הערה:** Puppeteer מוריד את Chrome אוטומטית. זה יכול לקחת כמה דקות.

### 2. הפעלת השרת

**Windows:**
```bash
cd server
npm run dev
```

או:
```bash
server\start.bat
```

**Linux/Mac:**
```bash
cd server
npm run dev
```

או:
```bash
chmod +x server/start.sh
./server/start.sh
```

השרת ירוץ על `http://localhost:3001`

### 3. הפעלת ה-Frontend

בטרמינל נפרד:

```bash
npm run dev
```

ה-frontend ירוץ על `http://localhost:5173` (או פורט אחר לפי Vite)

## שימוש

1. פתח את האתר בדפדפן (`http://localhost:5173`)
2. בחר **"התחברות למשוב"** במקום "העלאה ידנית"
3. הזן:
   - **כתובת משוב** - ה-URL המלא של משוב (למשל: `https://misbo.example.com`)
   - **שם משתמש** - שם המשתמש שלך במשוב
   - **סיסמה** - הסיסמה שלך במשוב
4. לחץ על **"התחבר והורד קבצים"**
5. המערכת תנסה להתחבר ולמצוא את הקבצים אוטומטית

## מגבלות והערות

### מגבלות טכניות

- **מבנה משוב שונה** - כל אתר משוב יכול להיות שונה. אם ההתחברות או ההורדה לא עובדות, ייתכן שצריך להתאים את הקוד למבנה הספציפי של משוב שלך.
- **הורדות אוטומטיות** - לא תמיד עובדות בצורה מושלמת. אם זה לא עובד, השתמש במצב "העלאה ידנית".
- **ביצועים** - השרת פותח דפדפן אמיתי, כך שזה יכול להיות איטי יותר מהעלאה ידנית.

### אבטחה

- **סיסמאות לא נשמרות** - הסיסמה נשלחת לשרת רק לצורך התחברות, ולא נשמרת.
- **Sessions** - Sessions נשמרים זמנית בזיכרון ונמחקים אחרי 30 דקות.
- **Rate Limiting** - יש הגבלה של 10 בקשות לדקה לכל IP.

## פתרון בעיות

### השרת לא מתחיל

1. וודא ש-Node.js מותקן (גרסה 18+):
   ```bash
   node --version
   ```

2. וודא שהפורט 3001 פנוי:
   ```bash
   # Windows
   netstat -ano | findstr :3001
   
   # Linux/Mac
   lsof -i :3001
   ```

3. בדוק את הלוגים של השרת לשגיאות

### התחברות נכשלת

1. **וודא שכתובת משוב נכונה**
   - צריך להיות URL מלא עם `https://` או `http://`
   - בדוק שהכתובת נכונה בדפדפן

2. **וודא ששם המשתמש והסיסמה תקינים**
   - נסה להתחבר ידנית במשוב כדי לוודא

3. **בדוק את הקונסול של השרת**
   - השרת מדפיס הודעות שגיאה מפורטות

4. **מבנה משוב שונה**
   - אם המבנה של משוב שלך שונה, ייתכן שצריך לעדכן את הסלקטורים ב-`server/server.js`

### קבצים לא מורדים

1. **נסה להוריד ידנית**
   - אם ההורדה האוטומטית לא עובדת, השתמש במצב "העלאה ידנית"

2. **בדוק את הלוגים**
   - השרת מדפיס הודעות על מה שהוא מוצא

3. **עדכן את הסלקטורים**
   - אם אתה יודע את המבנה של משוב שלך, תוכל לעדכן את הסלקטורים ב-`server/server.js`

## שיפורים עתידיים

- [ ] תמיכה ב-Playwright (תמיכה טובה יותר בהורדות)
- [ ] העברת קבצים ישירות ל-frontend
- [ ] זיהוי אוטומטי של מבנה משוב
- [ ] ממשק ניהול למורים
- [ ] תמיכה במספר כיתות בו-זמנית

## תמיכה

אם נתקלת בבעיות:
1. בדוק את הלוגים של השרת
2. בדוק את הקונסול של הדפדפן
3. נסה במצב "העלאה ידנית" כדי לוודא שהבעיה היא באינטגרציה
