# ערבויות בטיחות - מה הקוד עושה ומה לא

## ✅ מה הקוד עושה (בטוח)

### 1. קריאה בלבד
- ✅ קורא דפים במשוב
- ✅ לוחץ על קישורים לניווט
- ✅ בוחר מתוך רשימות (שכבה, כיתה)
- ✅ מוריד קבצים (Excel, CSV)

### 2. בחירות בלבד
- ✅ בוחר שנת לימודים
- ✅ בוחר בית ספר מרשימה
- ✅ בוחר שכבה
- ✅ בוחר כיתה
- ✅ בוחר "מתחילת השנה"

### 3. הורדות בלבד
- ✅ מוריד קובץ התנהגות
- ✅ מוריד קובץ ציונים
- ✅ לא משנה את הקבצים במשוב

---

## ❌ מה הקוד לא עושה (חסום)

### 1. כתיבה/שינוי נתונים
- ❌ לא משנה ציונים
- ❌ לא מוסיף הערות
- ❌ לא מעדכן פרטי תלמידים
- ❌ לא משנה הגדרות

### 2. פעולות מסוכנות
- ❌ לא לוחץ על כפתורי "שמור"
- ❌ לא לוחץ על כפתורי "מחק"
- ❌ לא לוחץ על כפתורי "עדכן"
- ❌ לא שולח טפסים שמשנים נתונים

### 3. פעולות הרסניות
- ❌ לא מוחק תלמידים
- ❌ לא מוחק כיתות
- ❌ לא משנה הרשאות
- ❌ לא משנה סיסמאות

---

## 🔒 איך זה מוגן?

### 1. בדיקת מילים מסוכנות

```javascript
// לפני כל לחיצה, הקוד בודק:
const dangerousKeywords = ['שמור', 'מחק', 'עדכן', 'שלח'];

if (buttonText.includes('שמור')) {
  // ❌ חסום! לא לוחץ
  throw new Error('SAFETY: Blocked dangerous action');
}
```

### 2. רק קישורי הורדה

```javascript
// הקוד רק לוחץ על קישורים עם:
const safeKeywords = ['הורד', 'ייצוא', 'download', 'export'];

if (!linkText.includes('הורד')) {
  // ❌ חסום! לא קישור הורדה
  throw new Error('SAFETY: Not a download link');
}
```

### 3. רק בחירות, לא שינויים

```javascript
// הקוד רק בוחר מתוך select:
await select.select('ח\'');  // ✅ מותר

// הקוד לא ממלא input שמשנה נתונים:
await input.type('100');  // ❌ חסום!
```

### 4. לוג כל פעולה

```javascript
// כל פעולה חשובה נכתבת ללוג:
SafetyLogger.logAction('Download file', { type: 'behavior' });

// אם משהו מסוכן נחסם:
SafetyLogger.warnDangerous('Click button', 'Button contains "שמור"');
```

---

## 🛡️ איך לבדוק שהכל בטוח?

### בדיקה 1: הרץ במצב גלוי

```javascript
// ב-server.js, שנה ל:
const browser = await puppeteer.launch({
  headless: false,  // תראה את הדפדפן
  slowMo: 250       // האט את הפעולות
});
```

כך תראה בדיוק מה הקוד עושה!

### בדיקה 2: צלם מסכים

```javascript
// הוסף ל-server.js:
await page.screenshot({ path: 'before-action.png' });
// ... פעולה ...
await page.screenshot({ path: 'after-action.png' });
```

כך תראה מה קרה לפני ואחרי כל פעולה.

### בדיקה 3: בדוק את הלוגים

```bash
# ב-Render, בדוק את הלוגים:
# תראה הודעות כמו:
[SAFETY] Safe click: { action: 'Download file' }
[SAFETY WARNING] Blocked: Click button - Button contains "שמור"
```

---

## 📋 רשימת בדיקה

לפני שימוש, וודא:

- [ ] הקוד רק קורא דפים
- [ ] הקוד רק לוחץ על קישורים
- [ ] הקוד רק בוחר מתוך רשימות
- [ ] הקוד רק מוריד קבצים
- [ ] הקוד לא לוחץ על כפתורי "שמור"
- [ ] הקוד לא לוחץ על כפתורי "מחק"
- [ ] הקוד לא ממלא טפסים שמשנים נתונים
- [ ] כל פעולה נכתבת ללוג

---

## ⚠️ מה לעשות אם משהו נראה מסוכן?

### אם אתה רואה בלוגים:
```
[SAFETY WARNING] Blocked: ...
```

**זה טוב!** הקוד חסם פעולה מסוכנת.

### אם אתה רוצה להיות בטוח יותר:

1. **הרץ במצב גלוי** (`headless: false`)
2. **צלם מסכים** בכל שלב
3. **בדוק את הלוגים** אחרי כל פעולה
4. **נסה ידנית** את אותה פעולה במשוב

---

## 🎯 סיכום

**הקוד מוגן כי:**
1. ✅ בודק כל פעולה לפני ביצוע
2. ✅ חוסם פעולות מסוכנות
3. ✅ רק קורא ומוריד, לא משנה
4. ✅ לוג כל פעולה חשובה

**אתה יכול להיות רגוע:**
- הקוד לא ישנה שום דבר במשוב
- הקוד רק קורא ומוריד קבצים
- כל פעולה מסוכנת נחסמת אוטומטית

---

## 📞 אם יש שאלות

אם אתה רואה משהו שנראה מסוכן:
1. בדוק את הלוגים
2. הרץ במצב גלוי
3. צלם מסכים
4. תגיד לי ואבדוק יחד

**הבטיחות היא העדיפות הראשונה!** 🔒
